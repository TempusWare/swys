<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWYS TARDIS Canvas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@100..900&display=swap" rel="stylesheet">
    <style>
        area {
            cursor: pointer;
        }
        area:hover {
            background-color: white;
        }

        .contentContainer {
            display: flex;
            justify-content: center;
            flex-direction: column;
        }

        h1, p, table {
            text-align: center;
            
            font-family: "Alexandria", sans-serif;
            font-optical-sizing: auto;
            font-style: normal;
        }

        h1 {
            
            font-weight: 300;
        }

        p {
            max-width: 1000px;
            margin: auto;
            font-weight: 200;
        }

        .mapContainer {
            display: flex;
            max-width: 1200px;
            cursor: crosshair;
            margin: auto;
            margin-top: 20px;
        }

        .mapContainer > img {
            width: 100%;
        }

        table {
            border-collapse: collapse;
            max-width: 1200px;
            width: 100%;
            margin: auto;
        }

        th, td {
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even){background-color: #f2f2f2}

        th {
            background-color: #224390;
            color: white;
        }
    </style>
    <script src="imageMapResizer.min.js"></script>
</head>
<body>
    <div class="contentContainer">  
        <h1>SWYS Doctor Who Canvas</h1>
        <p>This is a playable version of the TARDIS canvas originally created by Big Ideas Digital. The original game was discontinued in 2014 and is unplayable. This is a basic JavaScript reimagining of what the game was like. I am unaffiliated with Big Ideas Digital and the BBC.</p>
        <p>Credits to Big Ideas Digital, <a href="https://firecrows.blogspot.com/2015/05/illustrations-for-dr-who-app.html?m=1">Ryan Firchau (illustrator)</a>, and an <a href="https://forums.supercheats.com/video-games/doctor-who-say-what-you-see/135691/doctor-who-say-what-you-see-an.htm">anonymous user</a> who posted a list of solutions for this canvas in 2013.</p>

        <div class="mapContainer">
        <!-- Image Map Generated by http://www.image-map.net/ -->
        <img src="./DrWho_Canvas1Web.jpg" usemap="#image-map">
        <map name="image-map" id="canvasMap">
            <area target="" alt="50" title="50" coords="243,323,255,364,122,389,124,406,74,386,110,338,117,351" shape="poly">
            <area target="" alt="24" title="24" coords="407,405,376,395,355,444,384,451" shape="poly">
            <area target="" alt="23" title="23" coords="352,379,335,377,334,350,329,337,304,344,301,358,308,377,293,412,298,449,322,460,321,485,329,495,334,574,341,604,356,600,360,583,390,576,391,565,379,560,372,468,366,453,358,444,365,418" shape="poly">
            <area target="" alt="7" title="7" coords="1220,388,1289,378,1273,477,1207,490" shape="poly">
            <area target="" alt="12" title="12" coords="732,670,762,684,755,712,728,704" shape="poly">
            <area target="" alt="1" title="1" coords="767,591,845,593,842,626,770,619" shape="poly">
            <area target="" alt="21" title="21" coords="537,1033,513,1040,506,993,534,975,578,995,712,1121,684,1143,570,1027" shape="poly">
            <area target="" alt="30" title="30" coords="1097,981,1066,965,1061,914,1084,899,1148,913,1145,945,1167,954,1240,972,1283,995,1288,1032,1326,1046,1326,1088,1290,1121,1251,1121,1245,1131,1173,1125,1153,1092,1129,1122,1104,1119,1095,1049" shape="poly">
            <area target="" alt="3" title="3" coords="832,695,811,682,808,654,827,646,857,650,875,663,871,685,855,698" shape="poly">
            <area target="" alt="8" title="8" coords="681,626,681,605,684,560,698,538,687,479,681,453,671,442,652,439,633,462,633,486,626,510,647,520,652,533,639,540,643,644,652,651,664,636" shape="poly">
            <area target="" alt="9" title="9" coords="608,530,647,537,652,516,608,511" shape="poly">
            <area target="" alt="48" title="48" coords="659,374,644,384,626,380,612,335,626,328,599,315,599,291,611,291,611,263,653,256,666,257,681,292,670,315,701,336,728,356,714,372,701,374,702,403,677,398,669,384" shape="poly">
            <area target="" alt="5" title="5" coords="671,415,671,394,611,386,604,413" shape="poly">
            <area target="" alt="4" title="4" coords="1202,757,1194,707,1215,702,1233,755,1276,820,1273,887,1233,924,1202,926,1130,906,1149,875,1160,834,1129,810,1132,791,1159,784" shape="poly">
            <area target="" alt="44" title="44" coords="1039,685,1083,663,1078,718,1085,732,1100,736,1119,625,1097,613,1084,629,1053,634,1019,641,1026,668" shape="poly">
            <area target="" alt="39" title="39" coords="1025,632,1023,609,996,602,981,582,985,554,1013,568,1030,558,1020,517,1039,485,1074,465,1111,473,1100,497,1074,534,1084,545,1104,555,1097,588,1091,598,1090,616,1076,630,1057,632,1032,639" shape="poly">
            <area target="" alt="26" title="26" coords="557,326,31" shape="circle">
            <area target="" alt="40" title="40" coords="1111,527,29" shape="circle">
            <area target="" alt="42" title="42" coords="1158,315,28" shape="circle">
            <area target="" alt="29" title="29" coords="1145,252,1105,266,1046,273,1039,246,1107,201,1117,185,1114,166,1145,113,1177,135,1194,106,1238,125,1247,219,1211,232,1217,280,1187,293,1145,283" shape="poly">
            <area target="" alt="34" title="34" coords="434,875,441,896,468,889,464,860,468,830,468,788,452,783,410,799,406,830,386,843,384,870,417,887" shape="poly">
            <area target="" alt="36" title="36" coords="1232,379,1327,366,1334,311,1312,303,1241,315" shape="poly">
            <area target="" alt="14" title="14" coords="974,681,967,701,953,694,957,674" shape="poly">
            <area target="" alt="27" title="27" coords="363,1099,359,980,353,910,322,734,319,654,281,557,280,679,321,907,310,940,208,885,174,854,182,816,95,840,52,920,61,980,41,1033,116,1041,181,1074,294,1028,329,1011" shape="poly">
            <area target="" alt="25" title="25" coords="472,311,46" shape="circle">
            <area target="" alt="22" title="22" coords="95,568,185,503,153,435,90,404,30,395,21,401,68,555" shape="poly">
            <area target="" alt="17" title="17" coords="1012,866,1008,848,1013,836,1002,822,1016,771,988,740,982,730,1012,722,1033,696,1061,702,1064,723,1078,723,1087,739,1060,750,1060,778,1093,797,1083,816,1056,832,1081,863,1046,889,1036,873" shape="poly">
            <area target="" alt="18" title="18" coords="1035,764,22" shape="circle">
            <area target="" alt="13" title="13" coords="1016,668,1015,635,988,628,981,646,981,659,953,672,944,723,957,735,955,795,965,799,955,833,971,857,1015,875,1023,868,1005,834,1006,779,1002,755,982,737,979,727,1006,723,1020,706,973,699,978,681" shape="poly">
            <area target="" alt="15" title="15" coords="537,741,526,663,531,635,523,608,509,618,499,660,517,720,524,744" shape="poly">
            <area target="" alt="11" title="11" coords="664,687,666,670,608,627,605,611,643,601,637,559,606,530,595,511,578,512,581,528,626,563,625,594,591,591,585,617,608,651,636,670" shape="poly">
            <area target="" alt="45" title="45" coords="753,167,824,167,824,81,758,85" shape="poly">
            <area target="" alt="33" title="33" coords="1314,427,1372,396,1368,322,1354,297,1370,261,1391,256,1409,198,1420,202,1420,280,1476,273,1508,353,1484,343,1420,335,1402,362,1389,408,1411,421,1440,383,1452,386,1447,418,1459,440,1453,468,1408,485" shape="poly">
            <area target="" alt="31" title="31" coords="1430,582,1437,506,1466,480,1473,463,1529,490,1584,429,1485,393,1449,381,1408,408,1394,404,1406,366,1502,350,1599,373,1600,480,1575,493,1590,517,1572,554,1538,562,1548,614,1553,630,1517,728,1514,856,1535,899,1562,890,1567,916,1504,931,1502,951,1476,962,1442,949,1422,976,1370,957,1354,945,1300,920,1286,894,1314,819,1354,754,1305,729,1307,705,1377,729,1392,691,1361,674,1391,616" shape="poly">
            <area target="" alt="32" title="32" coords="1338,705,1381,634,1419,569,1409,539,1300,481,1265,552,1207,604,1208,630" shape="poly">
            <area target="" alt="46" title="46" coords="1398,1105,1450,1088,1456,1027,1443,1002,1430,996,1375,994,1355,1017,1361,1089,1378,1100" shape="poly">
            <area target="" alt="47" title="47" coords="397,732,413,775,430,768,464,737,465,702,423,675,448,592,417,576,384,674,379,709,367,863,359,918,380,925,380,876,389,794" shape="poly">
            <area target="" alt="38" title="38" coords="868,946,893,959,906,955,923,920,907,903,910,894,869,894,820,888,769,917,767,941,787,959,834,959,864,959" shape="poly">
            <area target="" alt="6" title="6" coords="749,662,752,626,739,618,732,580,702,567,717,554,783,553,780,578,767,584,770,618,767,639,758,662" shape="poly">
            <area target="" alt="28" title="28" coords="198,1086,383,1166,379,1201,336,1198,198,1137" shape="poly">
            <area target="" alt="41" title="41" coords="930,618,929,601,957,598,979,577,988,519,988,502,970,475,970,461,923,455,902,434,888,444,888,454,876,460,883,474,890,487,895,512,912,511,910,543,893,550,886,563,893,576,881,583" shape="poly">
            <area target="" alt="43" title="43" coords="994,679,1012,674,1019,638,1002,625,979,633,981,666" shape="poly">
            <area target="" alt="19" title="19" coords="1046,278,1039,253,1001,247,992,261,999,280,1020,301,1029,328,991,332,987,381,989,396,1040,410,1049,370,1049,315" shape="poly">
            <area target="" alt="10" title="10" coords="579,515,27" shape="circle">
            <area target="" alt="20" title="20" coords="977,322,1001,326,1018,332,1028,318,1011,291,992,295,975,302" shape="poly">
            <area target="" alt="2" title="2" coords="902,686,933,682,944,661,933,641,919,641,893,654,881,662,888,675" shape="poly">
            <area target="" alt="49" title="49" coords="137,729,120,679,140,644,129,627,85,623,41,637,42,657,57,669,17,692,10,737,23,751,38,763,110,751" shape="poly">
            <area target="" alt="14" title="14" coords="558,692,581,686,575,667,555,669" shape="poly">
            <area target="" alt="14" title="14" coords="766,695,783,689,790,705,773,712" shape="poly">
            <area target="" alt="37" title="37" coords="823,792,827,756,872,738,931,738,942,781,953,828,935,882,899,889,836,882,809,842" shape="poly">
            <area target="" alt="16" title="16" coords="976,681,1017,672,1017,703,974,696" shape="poly">
            <area target="" alt="35" title="35" coords="1245,299,1332,285,1341,201,1259,214" shape="poly">
        </map>
        </div>

        <table id="solutionsTable">
            <tr>
                <th>Puzzle No.</th>
                <th>Solution</th>
            </tr>
        </table>
    </div>


    <script>
        // Solutions from https://forums.supercheats.com/video-games/doctor-who-say-what-you-see/135691/doctor-who-say-what-you-see-an.htm
        const solutions = [
            "fathers day",
            "donna",
            "daleks",
            "spoonheads",
            "rose",
            "black orchid",
            "gridlock", 
            "time lord",
            "key to time",
            "eleventh hour",
            "timelash",
            "doctor who",
            "doctor dances",
            "three doctors",
            "torchwood",
            "face of boe",
            "doctors daughter",
            "empty child",
            "master",
            "jo",
            "k9",
            "girl in the fireplace",
            "brigadier",
            "psychic paper",
            "earthshock",
            "planet of fire",
            "ice warrior",
            "cold war",
            "weeping angel",
            "sea devil",
            "green death",
            "city of death",
            "vampires of venice",
            "demons run",
            "strax",
            "racnoss",
            "bessie",
            "rory",
            "bad wolf",
            "stolen earth",
            "time and the rani",
            "turn left",
            "blink",
            "sonic screwdriver",
            "ace",
            "skaro",
            "autons",
            "runaway bride",
            "the silence",
            "silence in the library"
        ]
        
        const table = document.getElementById("solutionsTable"), areas = document.querySelectorAll("#canvasMap area")

        if (localStorage["solved"]) {
            var solved = JSON.parse(localStorage.getItem("solved"))
        } else {
            var solved = []
        }

        for (let i = 0; i < solutions.length; i++) {
            const s = solutions[i]
            
            let row = table.insertRow(i + 1)

            let cell1 = row.insertCell(0)
            let cell2 = row.insertCell(1)

            cell1.innerHTML = i + 1

            if (solved.includes((i + 1).toString())) {
                cell2.innerHTML = s
            } else {
                cell2.innerHTML = s.replaceAll(/[1234567890abcdefghijklmnopqrstuvwxyz]/g,"-")
            }
        }

        function tap(e) {
            let puzzleNo = e.target.title
            console.log(`Tapped on Puzzle #${puzzleNo}`)

            let input = prompt(`Enter solution for Puzzle #${puzzleNo}:`)
            if (input === null) return

            let answer = input.trim().toLowerCase().replaceAll(/[^0-9a-z ]/gi, "")
            
            if (answer.startsWith("the ") && answer != "the silence") {
                answer = answer.substring(4, answer.length)
            }
            
            let solution = solutions[puzzleNo - 1]

            if (answer === solution) {
                alert("Awesome!")
                table.children[0].children[puzzleNo].children[1].innerHTML = solution
                solved.push(puzzleNo)
                localStorage.setItem("solved", JSON.stringify(solved));
            } else {
                alert("Wrong!")
            }
        }

        areas.forEach(area => {
            area.addEventListener("click", tap)
        })

        imageMapResize()
    </script>
</body>
</html>